<!DOCTYPE html>
<html>
<head>
    <title>Test Conectividad Supabase desde Navegador</title>
</head>
<body>
    <h1>üß™ Test de Conectividad Supabase</h1>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        function log(message) {
            results.innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }
        
        async function testSupabaseConnectivity() {
            log('üîÑ Iniciando tests de conectividad...');
            
            // Test 1: REST API
            log('<br><strong>Test 1: REST API</strong>');
            try {
                const response = await fetch('https://vzcuumrnilzeufizyfei.supabase.co/rest/v1/', {
                    headers: {
                        'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6Y3V1bXJuaWx6ZXVmaXp5ZmVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4Nzg1MzYsImV4cCI6MjA4MDQ1NDUzNn0.75eJJ1fxDaL4eRiyoQ_-EOdNTGV61uwQHqbuYS8rx9A'
                    }
                });
                
                log(`‚úÖ REST API: ${response.status} ${response.statusText}`);
                
                if (response.status === 200 || response.status === 401) {
                    log('üéâ ¬°REST API funciona desde el navegador!');
                } else if (response.status === 403) {
                    log('‚ùå Sigue dando 403 desde navegador');
                }
                
            } catch (error) {
                log(`‚ùå Error REST API: ${error.message}`);
            }
            
            // Test 2: Auth Health
            log('<br><strong>Test 2: Auth Health</strong>');
            try {
                const response = await fetch('https://vzcuumrnilzeufizyfei.supabase.co/auth/v1/health', {
                    headers: {
                        'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6Y3V1bXJuaWx6ZXVmaXp5ZmVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4Nzg1MzYsImV4cCI6MjA4MDQ1NDUzNn0.75eJJ1fxDaL4eRiyoQ_-EOdNTGV61uwQHqbuYS8rx9A'
                    }
                });
                
                log(`‚úÖ Auth Health: ${response.status} ${response.statusText}`);
                
                if (response.ok) {
                    const data = await response.json();
                    log(`üìã Auth Data: ${JSON.stringify(data)}`);
                }
                
            } catch (error) {
                log(`‚ùå Error Auth Health: ${error.message}`);
            }
            
            // Test 3: Crear cliente Supabase
            log('<br><strong>Test 3: Cliente Supabase</strong>');
            try {
                // Simular createClient
                log('üì¶ Simulando createClient...');
                
                const testAuth = await fetch('https://vzcuumrnilzeufizyfei.supabase.co/auth/v1/user', {
                    headers: {
                        'apikey': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6Y3V1bXJuaWx6ZXVmaXp5ZmVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4Nzg1MzYsImV4cCI6MjA4MDQ1NDUzNn0.75eJJ1fxDaL4eRiyoQ_-EOdNTGV61uwQHqbuYS8rx9A',
                        'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6Y3V1bXJuaWx6ZXVmaXp5ZmVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4Nzg1MzYsImV4cCI6MjA4MDQ1NDUzNn0.75eJJ1fxDaL4eRiyoQ_-EOdNTGV61uwQHqbuYS8rx9A'
                    }
                });
                
                log(`‚úÖ User endpoint: ${testAuth.status} ${testAuth.statusText}`);
                
            } catch (error) {
                log(`‚ùå Error cliente: ${error.message}`);
            }
            
            log('<br><strong>üèÅ Tests completados</strong>');
        }
        
        // Ejecutar tests autom√°ticamente
        testSupabaseConnectivity();
    </script>
</body>
</html>